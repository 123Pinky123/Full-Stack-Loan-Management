<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>User Register</title>
  <link rel="stylesheet" href="register.css" />
</head>
<body>
  <div class="login-box">
    <div class="brand">
      <span class="logo">ğŸ’°</span>
      <span class="brand-name">MicroLoan</span>
    </div>
    <h2>Create Account</h2>
    <p class="subtitle">Join us and start your financial journey!</p>

    <form [formGroup]="registrationForm" (ngSubmit)="onSubmit()">
      <div class="input-group">
        <span class="icon">ğŸ‘¤</span>
        <input type="text" formControlName="fullname" placeholder="Full Name" required />
        <div *ngIf="registrationForm.get('fullname')?.invalid && registrationForm.get('fullname')?.touched" class="error-message">
          Full Name is required.
        </div>
      </div>

      <div class="input-group">
        <span class="icon">ğŸ“§</span>
        <input type="email" formControlName="email" placeholder="Email" required />
        <div *ngIf="registrationForm.get('email')?.invalid && registrationForm.get('email')?.touched" class="error-message">
          <span *ngIf="registrationForm.get('email')?.errors?.['required']">Email is required.</span>
          <span *ngIf="registrationForm.get('email')?.errors?.['email']">Enter a valid email address.</span>
        </div>
      </div>

      <div class="input-group">
        <span class="icon">ğŸ“</span>
        <input type="tel" formControlName="phone" placeholder="Phone Number" required />
        <div *ngIf="registrationForm.get('phone')?.invalid && registrationForm.get('phone')?.touched" class="error-message">
          <span *ngIf="registrationForm.get('phone')?.errors?.['required']">Phone Number is required.</span>
          <span *ngIf="registrationForm.get('phone')?.errors?.['pattern']">Enter a 10-digit phone number.</span>
        </div>
      </div>

      <div class="input-group">
        <span class="icon">ğŸ”’</span>
        <input type="password" formControlName="password" placeholder="Password" required #passwordInput>
        <span class="password-toggle" (click)="togglePasswordVisibility(passwordInput)">ğŸ‘ï¸</span>
        <div *ngIf="registrationForm.get('password')?.invalid && registrationForm.get('password')?.touched" class="error-message">
          <span *ngIf="registrationForm.get('password')?.errors?.['required']">Password is required.</span>
          <span *ngIf="registrationForm.get('password')?.errors?.['minlength']">Password must be at least 6 characters.</span>
        </div>
      </div>

      <div class="input-group">
        <span class="icon">ğŸ”’</span>
        <input type="password" formControlName="confirm" placeholder="Confirm Password" required #confirmPasswordInput>
        <span class="password-toggle" (click)="togglePasswordVisibility(confirmPasswordInput)">ğŸ‘ï¸</span>
        <div *ngIf="registrationForm.get('confirm')?.invalid && registrationForm.get('confirm')?.touched" class="error-message">
          Confirm Password is required.
        </div>
        <div *ngIf="registrationForm.errors?.['mismatch'] && registrationForm.get('confirm')?.touched" class="error-message">
          Passwords do not match.
        </div>
      </div>

      <button type="submit" class="btn" [disabled]="registrationForm.invalid || loading">
        <span *ngIf="!loading">Register</span>
        <span *ngIf="loading">Registering...</span>
      </button>
      
      <div *ngIf="errorMessage" class="error-message">
        {{ errorMessage }}
      </div>
    </form>

    <div class="register">
      Already have an account?
      <a routerLink="/user/login">Login</a>
    </div>
  </div>
</body>
</html>
